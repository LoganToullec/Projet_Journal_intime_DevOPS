properties([
  parameters([
    booleanParam(
        defaultValue: false,
        description: 'Cochez cette case si la date est avant le 15.',
        name: 'before_half'
    ),
    [
      $class: 'ChoiceParameter',
      choiceType: 'PT_SINGLE_SELECT',
      name: 'Month',
      script: [
            $class: 'GroovyScript', 
            fallbackScript: [
                classpath: [], 
                sandbox: false, 
                script: 
                    'return[\'Could not get Env\']'
            ], 
            script: [
                classpath: [], 
                sandbox: false, 
                script: 
                    "return[
                        'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin',
                        'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'
                    ]"
            ]
        ]
    ],
    [
      $class: 'CascadeChoiceParameter',
      choiceType: 'PT_CHECKBOX',
      name: 'USinEPIC',
      referencedParameters: 'Month',
      script: [
        $class: 'GroovyScript', 
        fallbackScript: [
            classpath: [], 
            sandbox: false, 
            script: 
                'return[\'Could not get Month from Env Param\']'
        ], 
        script: [
            classpath: [], 
            sandbox: false, 
            script: 
                ''' if (Month.equals("Janvier")) {
                        return["Acheter un journal intime", "raconter une première journée dans le journal", "Parler de 5 sujets différentes dans le journal"]
                    } else if (Month.equals("Février")) {
                        return["Réaliser un croquis de la décoration souhaité", "Réaliser un inventaire / liste d'achats", "Acheter les décorations manquantes", "Installer les décorations"]
                    } else if (Month.equals("Mars")) {
                        return["Sortir prendre l'air une fois par semaine","Manger sainement et s'autoriser un écart par semaine","Suivre des heures de coucher et de réveil","Aller courir 3 fois par semaine","Suivre une routine de soin de la peau"]
                    } else if (Month.equals("Avril")) {
                        return["Faire la surprise de rendre visite à mes grands parents","Inviter des amis à faire une sortie","Adopter un animal à la SPA","Faire plaisir à une personne proche","Venir en aide à une personne dans le besoin"]
                    } else if (Month.equals("Mai")) {
                        return["participer à des competitions de jjb", "prendre des billets pour une nouvelle destination", "s'inscrire à des cours de zumba", "faire du parachute"]
                    } else if (Month.equals("Juin")) {
                        return["Offrir des cadeaux","tester un restaurant que tout le monde aime", "réserver des billets pour un voyage en famille", "organiser un pique-nique" ]
                    } else if (Month.equals("Juillet")) {
                        return["Inviter des amis à Lollapalooza", "Acheter les billets pour le festival", "Assister aux feux d'artifices", "Prendre des photos"]
                    } else if (Month.equals("Août")) {
                        return["Préparer un pique nique", "Prendre un bain de minuit", "Faire une promenade", "Contempler les étoiles" ]
                    } else if (Month.equals("Septembre")) {
                        return["planifier un voyage", "rechercher des endroits à explorer", "s'entrainer physiquement pour le voyage", "acheter un appareil photo"]
                    } else if (Month.equals("Octobre")) {
                        return["explorer les sites des cours en ligne", "choisir des cours", "participer à des groupes d'études", "réaliser un projet personnel"]
                    } else if (Month.equals("Novembre")) {
                        return["Sélection de l'instrument à apprendre","Commencer des tutoriels pour débutants","Suivi des progrès","Partager sa progression"]
                    } else if (Month.equals("Décembre")) {
                        return["Introduction à la respiration consciente","Rappels quotidiens pour respirer"]
                    }
                '''
        ]
    ]
   ]
 ])
])

pipeline {
  agent any
  stages {
    stage('Build') {
      steps {
        script {
            echo "${params.Month}"
            echo "${params.before_half}"
            def selectedChoicesList = USinEPIC.split(',')

            // Afficher les choix sélectionnés
            println("Choix sélectionnés : ${selectedChoicesList}") 
        }              
      }
    }
  }
}